roxygen2::roxygenise()
htmlwidgets::scaffoldWidget("RacTiter")
usethis::use_testthat()
usethis::use_test("core")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
library(testthat)
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/data/map_ndsubset_no_outliers_new.ace")
mapdata <- covutils::long_map_list_info(list(monte = map))
mapdata
devtools::load_all()
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/data/map_ndsubset_no_outliers_new.ace")
mapdata <- covutils::long_map_list_info(list(monte = map))
jsonlite::toJSON(mapdata)
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
?arrange
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
2^8
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata$ag_name
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
2^9
2^10
2^11
2^12
colors()
?colors()
gplots::col2hex(mapdata$sr_col)
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
labsync::recently_edited(200)
labsync::recently_edited(200)
?dplyr::arrange
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
filter(titerdata, sr_group == "BA.1")
filter(titerdata, sr_group == "BA.1")
titerdata$sr_group
filter(titerdata, as.character(sr_group) == "BA.1")
dplyr::filter(titerdata, sr_group == "BA.1")
unique(dplyr::filter(titerdata, sr_group == "BA.1")$ag_name)
acutils::catn(unique(dplyr::filter(titerdata, sr_group == "BA.1")$ag_name))
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
filter(titerdata, sr_group == "BA.1")$ag_name
filter(titerdata, sr_group == "BA.1")
dplyr::filter(titerdata, sr_group == "BA.1")$ag_name
acutils::catn(dplyr::filter(titerdata, sr_group == "BA.1")$ag_name)
unique(ag_name)
unique(titerdata$ag_name)
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
acutils::catn(dplyr::filter(titerdata, sr_group == "BA.1")$ag_name)
unique(titerdata$ag_name)
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
?group_by
mapdata %>%
dplyr::group_by(
sr_group, ag_name
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
)
library(tidyverse)
mapdata %>%
group_by(
sr_group, ag_name
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
)
mapdata %>%
group_by(
sr_group, ag_name
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
) %>%
rename(
logtiter = gmt,
logtiter_upper = gmt_upper,
logtiter_upper = gmt_lower
)
mapdata %>%
group_by(
sr_group, ag_name
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
) %>%
rename(
logtiter = gmt,
logtiter_upper = gmt_upper,
logtiter_lower = gmt_lower
)
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata_summary
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all(); source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata %>%
covutils::longinfo_estimate_individual_effects(mapdata)
mapdata %>%
covutils::longinfo_estimate_individual_effects()
mapdata %>%
covutils::longinfo_estimate_individual_effects() %>%
covutils::remove_sr_individual_effect()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
acutils::catn(unique(mapdata_adjusted$ag_name))
acutils::catn(unique(mapdata_summary_adjusted$ag_name))
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
acutils::catn(unique(agNames(map)))
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata %>%
covutils::longinfo_estimate_individual_effects()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata %>%
distinct(
ag_name, ag_col, ag_group_cols
) -> ag_info
mapdata %>%
distinct(
sr_group, sr_col, sr_group_cols
) -> sr_info
mapdata %>%
group_by(
sr_group, ag_name
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
) %>%
rename(
logtiter = gmt,
logtiter_upper = gmt_upper,
logtiter_lower = gmt_lower
) %>%
mutate(
sr_name = as.character(sr_group)
) -> mapdata_summary
mapdata %>%
covutils::remove_sr_individual_effect() %>%
group_by(
ag_name, sr_group
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
) %>%
rename(
logtiter_no_ie = gmt,
logtiter_upper_no_ie = gmt_upper,
logtiter_lower_no_ie = gmt_lower
) %>%
mutate(
sr_name = as.character(sr_group)
) -> mapdata_summary_no_ie
mapdata %>%
covutils::remove_sr_individual_effect() %>%
covutils::remove_sr_group_effect() %>%
group_by(
ag_name, sr_group
) %>%
acutils::summarise_gmt(
dilution_stepsize = 0
) %>%
rename(
logtiter_no_ie_gmt = gmt,
logtiter_upper_no_ie_gmt = gmt_upper,
logtiter_lower_no_ie_gmt = gmt_lower
) %>%
mutate(
sr_name = as.character(sr_group)
) -> mapdata_summary_no_ie_gmt
mapdata_summary %>%
left_join(
mapdata_summary_no_ie, by = c("sr_group", "ag_name")
) %>%
left_join(
mapdata_summary_no_ie_gmt, by = c("sr_group", "ag_name")
) %>%
left_join(
ag_info, by = "ag_name"
) %>%
left_join(
sr_info, by = "sr_group"
) %>%
arrange(
factor(ag_name, agNames(map))
) -> mapdata_summary
test_that("plotting titers", {
export.plot.test(
RacTiter(mapdata),
"sr_titers.html"
)
})
# Read in data
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/data/map_ndsubset_no_outliers_new.ace")
mapdata <- covutils::long_map_list_info(list(monte = map))
mapdata %>%
covutils::longinfo_estimate_individual_effects() -> mapdata
mapdata %>%
covutils::remove_sr_individual_effect() %>%
select(
sr_group,
ag_name,
logtiter
) %>%
rename(
logtiter_no_ie = logtiter
) -> mapdata_no_ie
mapdata %>%
covutils::remove_sr_individual_effect() %>%
covutils::remove_sr_group_effect() %>%
select(
sr_group,
ag_name,
logtiter
) %>%
rename(
logtiter_no_ie_gmt = logtiter
) -> mapdata_no_ie_gmt
mapdata_no_ie
mapdata_no_ie_gmt
mapdata %>%
left_join(
mapdata_no_ie, by = c("sr_group", "ag_name")
) %>%
left_join(
mapdata_no_ie_gmt, by = c("sr_group", "ag_name")
)
mapdata_no_ie
# Read in data
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/data/map_ndsubset_no_outliers_new.ace")
mapdata <- covutils::long_map_list_info(list(monte = map))
mapdata %>%
covutils::longinfo_estimate_individual_effects() -> mapdata
mapdata %>%
covutils::remove_sr_individual_effect() %>%
select(
sr_name,
ag_name,
logtiter
) %>%
rename(
logtiter_no_ie = logtiter
) -> mapdata_no_ie
mapdata %>%
covutils::remove_sr_individual_effect() %>%
covutils::remove_sr_group_effect() %>%
select(
sr_name,
ag_name,
logtiter
) %>%
rename(
logtiter_no_ie_gmt = logtiter
) -> mapdata_no_ie_gmt
mapdata %>%
left_join(
mapdata_no_ie, by = c("sr_name", "ag_name")
) %>%
left_join(
mapdata_no_ie_gmt, by = c("sr_name", "ag_name")
) -> mapdata
mapdata %>%
distinct(
ag_name, ag_col, ag_group_cols
) -> ag_info
mapdata %>%
distinct(
sr_group, sr_col, sr_group_cols
) -> sr_info
mapdata
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::install()
devtools::install()
devtools::install()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
library(testthat)
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata_imputed
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
mapdata_imputed
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
mapdata
unique(mapdata$ag_name)
agNames(map)
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
# Read in data
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/resubmission/data/maps/map_ndsubset_no_outliers.ace")
covutils::long_map_list_info(list(monte = map)) %>% arrange(factor(ag_name, agNames(map)))
covutils::long_map_list_info(list(monte = map))
covutils::long_map_list_info(list(monte = map)) %>% arrange(ag_name)
covutils::long_map_list_info(list(monte = map)) %>% arrange(factor(ag_name))
covutils::long_map_list_info(list(monte = map)) %>% arrange(factor(ag_name, agNames(!!map)))
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
srGroups(map)
levels(srGroups(map))
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
acutils::log_titers
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
# Read in data
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/resubmission/data/maps/map_full_no_outliers.ace")
max(logtiterTable(map))
max(logtiterTable(map), na.rm = T)
# Read in data
map <- read.acmap("../../publications/in review/duke-sars2-cartography-paper/resubmission/data/maps/map_full_no_outliers.ace")
levels(srGroups(map))
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
agSequences(map)
as_tibble(agSequences(map), rownames = "ag_name")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::load_all()
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
source("~/Dropbox/labbook/packages/Ractiters/tests/testthat/test-core.R")
devtools::install()
devtools::install()
source("~/Library/CloudStorage/OneDrive-UniversityofCambridge/labbook/packages/Ractiters/R/effects.R")
